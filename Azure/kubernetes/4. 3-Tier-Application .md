# Deploy 3-Tier Application in AKS

### Step 1 : Create cluster

- In portal search "Kubernetes services"

- Create > "kubernetes cluster"

![image](https://github.com/user-attachments/assets/00ffa18a-1052-402d-a588-ad29eb595146)
![image](https://github.com/user-attachments/assets/86b74638-196c-48db-ad59-f7a047dfb227)

**Next:Nodepools**

![image](https://github.com/user-attachments/assets/6bb07fc1-ff19-4a73-8341-b9c94655f782)

**Next:Networking**

- Public access ip:In browser check my ip

![image](https://github.com/user-attachments/assets/ffbb803d-ec9f-423f-90c9-b91d24ce4d9f)
![image](https://github.com/user-attachments/assets/dbd42219-846e-48f3-b80e-9a3cc8dbc9c9)

**Next:Integrations**

![image](https://github.com/user-attachments/assets/03e9d51a-83d2-4f9a-a202-6cfedce3e308)

**Next:Security**

- Enable keyvault to store secrets

![image](https://github.com/user-attachments/assets/8c1c6bff-50b4-45c6-a65d-9de02e562450)

**Review+create**

### Step 2: Push image to container registry.

- Check "ems-ops-phase" in current directory.
- Create Dockerfile for frontend in ems-ops-phase > react-hooks-frontend.
```
# Use the official Node.js image as a base
FROM --platform=linux/arm64 node:14-alpine

# Set the working directory inside the container
WORKDIR /app

# Copy package.json and package-lock.json files to the working directory
COPY package*.json ./

# Install dependencies
RUN npm install

# Copy the rest of the application code to the working directory
COPY . .

# Expose port 3000 for the application
EXPOSE 3000

# Command to run the application
CMD ["npm", "start"]
```
- docker build -t react .

----------------------------------------------------------------------------------------------------------------------------
**ERROR FACED**

![image](https://github.com/user-attachments/assets/f44871ed-7ab5-454d-8596-d0604e1f2cc0)


- Check Node Architecture via kubectl
```
kubectl get nodes -o wide
```
- Then to get the architecture specifically:
```
kubectl get nodes -o jsonpath="{range .items[*]}{@.metadata.name}:{@.status.nodeInfo.architecture}{'\n'}"
```
![image](https://github.com/user-attachments/assets/013754ba-0664-43f4-9ee0-93ab5fbd479d)

- AKS cluster nodes are arm64 architecture.So Dockerfile base image wants to supports arm64.
---------------------------------------------------------------------------------------------------------------------------

- Clone git repo named "github-action" to current directory.
- cd 














Create Kubernetes Secret for DB Credentials

Use the values from Azure:

kubectl create secret generic db-secret \
  --from-literal=username='myuser@mydb' \
  --from-literal=password='yourpassword'
  
![image](https://github.com/user-attachments/assets/1af6850a-9927-4782-926c-bdf0ce59e005)

backend yaml
