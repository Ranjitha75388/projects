# Kubernetes 

##  What is Kubernetes?

Kubernetes is an open-source container orchestration platform tool that helps to run, manage, and scale containerized apps automatically.

### Key Features:

-    Auto-Scaling: Adds or removes app instances based on traffic.

-   Load Balancing: Shares traffic across app copies.

-  Rolling Updates: Updates apps without downtime.

-   Self-Healing: Restarts crashed apps automatically.

-   Service Discovery: Makes apps find and talk to each other easily.


## 1. Kubernetes Architecture and Main Components




##  Kubernetes Cluster Overview

A **Kubernetes cluster** is a group of computers that work together to run your containerized applications. These computers are divided into two main parts:

### 1. Control Plane (The Brain)

- This is the "brain" of the cluster â€” it manages the overall cluster.
- Typically, for **high availability**, a production cluster should have **at least 3 Control Plane nodes**, so if one fails, the others can continue managing the cluster.

### 2. Worker Nodes (The Workers)

- Actual computers that run the apps
- They get instructions from the Control Plane
- A cluster can have **1 or many worker nodes** based on the load


##  Control Plane Components

###  API Server

- Entry gate for all commands (like creating pods)
- Accepts commands from CLI (`kubectl`)
- Verifies and sends them to other components
- The only component that directly communicates with users

###  Scheduler

- Chooses the best worker node for new applications (Pods)
- Based on CPU, RAM, and availability
- Decides placement of new Pods

###  Controller Manager

- Watches the cluster and ensures the desired state is met.
- If a pod crashes, it recreates it
- Manages different controllers:
  - Node controller (checks if nodes are healthy)
  - Replication controller (manages replica pods)
  - Endpoints controller (joins services & pods)

###  etcd (Cluster Database)

- A simple key-value store
- Stores all the cluster information (like configurations data, pod status,secrets, and cluster state).

## Worker Node Components 

### Node

- A machine in the cluster
- Runs apps (pods) given by the Control Plane

### Pod

- A wrapper around one or more containers placed in nodes.


### Container Runtime

- Software responsible for running containers (e.g., Docker, containerd).
- Pulls container images and runs them

### kubelet

- Agent that runs on every worker node.
- Talks to Control Plane
- Tells the node what to do (start pod, stop pod)
- Ensures containers described in PodSpec are running

### kube-proxy

- Handles network rules on each node.

- Manages pod-to-pod and pod-to-service communication.

## Summary Table

| Component          | Role                                |
| ------------------ | ----------------------------------- |
| Cluster            | Group of machines running apps      |
| Node               | A single computer in the cluster    |
| Pod                | The smallest unit (runs containers) |
| Container          | The actual app                      |
| Control Plane      | The manager of everything           |
| API Server         | Entry point for commands            |
| Scheduler          | Picks best node for a pod           |
| Controller Manager | Maintains desired state             |
| etcd               | Stores current state                |
| Kubelet            | Runs on each node                   |
| Kube Proxy         | Directs traffic inside cluster      |


## 2. Ways to Set Up a Kubernetes Cluster

#### 1.Deploying All Components Separately (Manual Setup):

 -  You install and configure each Kubernetes component manually (API Server, Controller Manager, etc.)

- Best for: Advanced users who want full control

- Pros: Full customization

- Cons: Very complex and time-consuming
  
### 2.Using Kubeadm (Semi-Automated Setup):

-  **kubeadm** is a tool provided by Kubernetes to simplify the setup process

-  It creates a basic, working cluster quickly

-  Best for: Learners, small teams, or self-managed clusters

- Steps to use kubeadm:

   - Provision servers (for control plane + worker nodes)

    - Install dependencies on each node:

        - Container runtime (like Docker or containerd)

        - kubeadm, kubelet, and kubectl

    -  Initialize control plane using kubeadm init

    - Set up networking (using a plugin like Calico or Flannel)

    - Join worker nodes using kubeadm join

    - Verify cluster with kubectl get nodes

    - Deploy apps with YAML files and kubectl-

### 3.Using Managed Kubernetes Services (Cloud-Managed Kubernetes):

 -   Cloud providers like AWS (EKS), Azure (AKS), and Google Cloud (GKE) offer **fully-managed Kubernetes** services.

 -   These services handle the infrastructure and cluster management tasks, allowing you to focus on deploying and managing applications.

 -   Pros: Easy to set up, minimal maintenance, scaling, and monitoring are automated, no need for managing the underlying hardware.

 -   Cons: Less control over the infrastructure, potential vendor lock-in.

### 4.Using Minikube (Local Kubernetes Cluster for Development):

- Minikube allows you to run a local Kubernetes cluster on our machine for testing and development purposes.

- It's a single-node cluster that mimics a full Kubernetes environment and is great for learning or developing applications before moving them to a production cluster.

-  Steps:

     -   Install Minikube and a container runtime (like Docker).

     -   Start a local cluster using **minikube start**.

- Pros: Simple to set up, no need for cloud resources, ideal for developers and testing.

- Cons: Not suited for production workloads, limited to a single node.

## 3.Advantages of Cloud Managed Kubernetes

### Azure Kubernetes Service (AKS)

- Azure Kubernetes Service (AKS) is a managed Kubernetes service provided by Microsoft Azure. 

- It allows you to run Kubernetes without having to install or manage the control plane (master components) yourself.

- How AKS Works

   - Microsoft Azure sets up and manages the Kubernetes control plane (API Server, Scheduler, Controller Manager, etc.).

   - You manage the worker nodes (VMs) where your containers run.

    - You use kubectl or Azure CLI to deploy, scale, and monitor your applications.
 
- Key Features of AKS

   - Fully Managed	 - Azure handles upgrades, patches, monitoring, and security for the control plane.

  -  Integrated Security	- Built-in support for Azure AD, role-based access control, and secrets management.

   - CI/CD Integration	- Easily connect to tools like GitHub, Azure DevOps, Jenkins for automated deployments.

   - Monitoring & Logs	- Use Azure Monitor and Log Analytics to see how your apps are running.

   - Auto Scaling	Automatically - scale your pods or nodes based on resource usage.

   - Easy Updates	 - One-click or CLI-based rolling updates to your cluster.

   - Pay for What You Use	Only - pay for worker node resources (control plane is free).

   - Expert Support  - Cloud vendor support teams available for fast issue resolution.
 
### Basic Steps to Use AKS

1.Login to Azure:
```
  az login
```
2.Create a Resource Group:
```
  az group create --name myResourceGroup --location eastus
```
3.Create AKS Cluster:
```
  az aks create --resource-group myResourceGroup --name myAKSCluster --node-count 2 --enable-addons monitoring --generate-ssh-keys
```
4.Connect to AKS:
```
  az aks get-credentials --resource-group myResourceGroup --name myAKSCluster
```
5.Check Cluster:
```
  kubectl get nodes
```


## ðŸ”Ž Common Kubectl Commands

| Action         | Command                       |
| -------------- | ----------------------------- |
| List Pods      | `kubectl get pods`            |
| List Nodes     | `kubectl get nodes`           |
| List Services  | `kubectl get services`        |
| Describe a Pod | `kubectl describe pod <name>` |
| Delete a Pod   | `kubectl delete pod <name>`   |
| Get All Resources | `kubectl get all`         |

---

## âœ… Benefits of Using Kubernetes

- **Self-Healing**: Automatically restarts apps if they crash
- **Scalability**: Adds or removes containers based on usage
- **Rolling Updates**: Update apps without downtime
- **Load Balancing**: Shares traffic evenly
- **Portable**: Works on laptops, servers, or cloud
- **Secure**: Isolates and controls app communication
- **Declarative Configuration**: You describe what you want, Kubernetes does it

---





