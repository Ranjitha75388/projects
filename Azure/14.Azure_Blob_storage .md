# Azure Storage

## What is Azure Storage?

- Azure Storage is a cloud storage solution from Microsoft that offers various services for storing and managing different types of data, including unstructured, semi-structured, and structured data.
- It provides scalable, durable, and highly available services.

## Types of Storage in Azure:

 - Blob Storage – Stores unstructured data like text or binary (images, videos, documents).

 - File Storage – Shared file system (like SMB).

- Queue Storage – For message queuing between services.

- Table Storage – NoSQL key-value store.

##  What is Blob Storage?

   Blob (Binary Large Object) Storage is used to store : Images, documents, videos, backups, logs, large datasets, etc.

  #### Blob Types:

   -  Block blobs – For files like text, images.

   - Append blobs – For logging data.

   - Page blobs – For virtual hard drives (used in Azure VMs).

# 1. Public Access to Azure Blob Storage
  **Use case**: Anyone (even outside Azure) can access blobs via URL/SAS.
  
**Step 1:** Go to Azure Portal --> Storage Accounts --> Create

   ![image](https://github.com/user-attachments/assets/f5a37ad9-9cf4-4d1d-a8b3-854fefe68022)

**Step 2:** Choose **"Enable public access from all networks"** under Networking
   
  ![image](https://github.com/user-attachments/assets/2d4725d2-d38d-4e0d-bcd1-7ccb2aa3353a)


 **Step 3:** Create Container

  -  Go to Data Storage > Containers

  -  Create a container

   ![image](https://github.com/user-attachments/assets/1eb24987-3774-4c78-ae0a-acc31c75c100)


**Step 4:** Change access level to "Blob (anonymous read access for blobs only)"  if it is private
  
- Go to configuration > enable blob anonymous access 

- Go to container > 3 dots > change access level > blob

![image](https://github.com/user-attachments/assets/c444db26-4daa-4e34-a9d4-071c07b66e13)

**Step 5:** Upload Blob/File

- Click created container
- Click upload
- Browse for files
- Select file that have to upload from local
- After uploading

![image](https://github.com/user-attachments/assets/b4407a9c-94bc-4e2d-9699-7f005535cb99)

**Step 6:** Access Using URL or Tools:

### Browser

Go to blob file in portal → click → Copy Blob URL → Open in browser

![image](https://github.com/user-attachments/assets/13219fc7-cd2a-469a-8b65-974b39f2faef)

### AzCopy (No login needed with public access)

1. List blobs:
```
azcopy list "https://<storage_account>.blob.core.windows.net/<container>?<sas-token>"
```
![image](https://github.com/user-attachments/assets/95dfa576-dd68-4871-80aa-8a2dd8ac1f1f)

2.Download blob:
```
azcopy cp "https://<storage_account>.blob.core.windows.net/<container>/<file>" "/your/local/path/"
```
![image](https://github.com/user-attachments/assets/e834a279-00e1-4112-aba6-4aac6be2c7ce)


#  2. Secure Access Using Service Endpoint

 **Use case:** Restrict blob access to only VMs in a selected subnet inside a VNet.

![image](https://github.com/user-attachments/assets/ea526e4a-d6aa-447d-8954-1b1439fbc357)


**Step 1:** Create VNet and Subnet
   
  - Create subnet for public vm
  - Create and Enable **private subnet** for private vm and Enable **Microsoft.Storage** as a Service Endpoint.

 **Step 2:** Create public vm and Private VM (No public IP)

 **Step 3:** Update NSG and NAT (private subnet)

 - Alllow NSG form public to public vm
 
 - Allow traffic from public VM to private vm

**Step 4:** Create Storage Account

 - Create storage Account : serviceendpointaccount
 - Create container : service-container
 - Upload files from local.
 - Under **Networking,** select:
   - Enabled from selected virtual networks and IP addresses
   - virtual networks > Add existing virtual network > vnet -> subnet attached service endpoint(private-vm subnet)
   - Firewall > Add your client ip address





















     
